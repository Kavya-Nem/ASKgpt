<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Chat Interface</title>
    </head>
    <body>
        <form id="form">
            <input type="text" id="message" placeholder="Type a message..." required>
            <input type="submit" value="Send">
        </form>
    </body>
    <script>
        function responseCallback(response) {
            console.log(response);
        }

        function httpGetAsync(theUrl, callback)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                    callback(xmlHttp.responseText);
            }
            xmlHttp.open("GET", theUrl, true); 
            xmlHttp.send(null);
        }

        var form = document.getElementById('form')
        form.addEventListener('submit',function(event){
            event.preventDefault() // prevents the form from autosubmitting
            var query = document.getElementById('message').value
            var url = "http://127.0.0.1:8000/polls/" + encodeURIComponent(query)
            console.log("query = " + query)
            console.log("url = " + url)
            window.location.replace(url)
        })
    </script>
</html>
